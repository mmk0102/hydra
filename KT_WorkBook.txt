
****07.09.20

02 ICD : error ? :
PostBuildEvent:
  setlocal
  cd C:\projects\ICD\trunk\Src
  if %errorlevel% neq 0 goto :cmEnd
  C:
  if %errorlevel% neq 0 goto :cmEnd
  copy /b CMakeLists.txt +,,
  if %errorlevel% neq 0 goto :cmEnd
  :cmEnd
  endlocal & call :cmErrorLevel %errorlevel% & goto :cmDone
  :cmErrorLevel
  exit /b %1
  :cmDone
  if %errorlevel% neq 0 goto :VCEnd
  :VCEnd
  Скопировано файлов:         1.
FinalizeBuildStatus:
  Файл "Win32\Debug\RUN_GEN\RUN_GEN.tlog\unsuccessfulbuild" удаляется.
  Обращение к "Win32\Debug\RUN_GEN\RUN_GEN.tlog\RUN_GEN.lastbuildstate".


сборки
\\newstorage\ktrs\Builds\FunctionalSoftware\BIUS

****24.08.20
about N in: make -j N
"I guess this is kinda heuristic — allowing make to launch CPUs + 1 processes"

Ticket #18915 - тикет Леры, связанный с моим #21077

****21.08.20
[Win + M] — сворачивает все активные окна на рабочем столе.
[Win + D] — сворачивает и разворачивает все активные окна
****31.07.20
cd /cygdrive/c - nav to disk in cyg
ln -s /cygdrive/c /c - create link in cyg

*****22.07.20
От Д.Потапова ссылка на модели (для тестирования)
\\10.10.121.90\Share\orion_sim

редактор групповых политик (gpedit.msc)
optionalfeatures.exe  - опциональные фичи

Адаптер замыкания на себя создается:
Диспетчер устройств -> (встать на сеть.адаптеры) - действия - установить старое оборудование и т.д.

*****16.03.20
Уст-л: VS Code, git - в C:\Users\Mikkir\AppData\Local\Programs поскольку не было прав админа.
С ГИТом встал MINGW64, when commited it give me mess:
Committer: Kiriltcev <mikkir@int.kronshtadt.ru>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly:

    git config --global user.name "Your Name"
    git config --global user.email you@example.com		

*****17.03.20
Запуск minGW - git Bash

Запуск cmake из win cmd.exe дает:
cl

  is not a full path and was not found in the PATH.

вероятно не стоит компил-р
поставил cigwin - наверно надо доставить cmake

поставил virtualbox. он не открывает .img файл в котором мне сбросили образ AstraLinux15
для работы нужно сконвертить его в .vdi:
C:\>cd Program Files\Oracle\VirtualBox
C:\Program Files\Oracle\VirtualBox>VBoxManage.exe convertfromraw -format VDI C:\Users\Mikkir\Documents\Virtual\AstraLinux15\AstraLinux15.img C:\Users\Mikkir\Documents\Virtual\AstraLinux15\AstraLinux15.vdi

Для подключения vdi нужно создать машину. При этом нужно 64, а в списке только 32. Проблема описана здесь:
https://it-actual.ru/no-x64-bit-emulation-options-in-virtualbox-fix.html
но суть: "заключается в отключенной функции аппаратной виртуализации в центральном процессоре компьютера."
в БИОС:  Intel Virtual Technology или нечто похожее должно быть enable
Помогло.
Так же выставил пункт про мультимониторы и он как-то подключился (не сразу и я не заметил как). 
cmake и make работают в cygwin. 

Пока не получ-я подключ. второй жесткий диск - отказано в доступе.

*****18.03.20
Затянули Styx через SVN. 
удалил мой cygwin - из-за неправ-й версии cmake. Теперь это в cygwin_pack
Для коррек-й работы подправил C:\cygwin_pack\cygwin\etc\fstab
и C:\cygwin_pack\Cygwin.bat
Для начала работы и настроек бат-файл надо запустить.

Быстрый переход в Styx - cd Styx (минуя проджект)
в /Styx/Rtems/Make был выполнен make
для windows нужен visual-studio

настроил git-config, but has recived:"SSL certificate problem: self signed certificate in certificate chain"
help this: git config --global http.sslVerify false
now push is working

*****19.03.20
Добавил пути к новому месту cygwin.
echo %PATH% - вывод всех сист-х путей.
cd /cygdrive/c - переход к диску С
ln -s /cygdrive/c /c - создание симв-й ссылки на С, после для навиг-ии достаточно делать как то так:
"cd /c/Foo
cd /c/"

Принтер ищется в \\voksv-prnserv по 628

First task:
C:\projects\orion\Doc\03_Software\High_Level_Requirements - здесь описание ОЭС-О
Код: 
OESOTask.h
namespace OESO

Отладка: 
файл Contrace: 
CONTRACE("%20s: %d\n", "State", (int)OS::indicator.StateCode());

static TIMETRACE tt(1000);
tt("Печать раз в секунду %d\n", var );


*****23.03.20
Делаю запись в понед. 23.03
Проблему с диск D решили (веро-о) отключением в БИОС hot launch (или что-то такое).
Мне поставили 2+1 задачи (+1 вытекла из прервых 2х). 

Схема работы с кодом Орион:
- Отдельно компилируем и ICD, затем Orion
- Компил-я происходит созданием копии папки build и правки скриптов с названиями соот-й ОС.
- запущеный в Styx скрипт должен создвть папку inst_x86_debug,
которая затем упомянута в скрипте Орион. 

Перед изменением статуса на complete/des-d ставим номер сборки (сейчас 1.1.7. ) который берем из jenkins: 
http://vorsv-ci.int.kronshtadt.ru:8080/job/BIUS/

Пр. оформл. коммита: "Ticket #20691 ОЭС-ОН. ..."

Создание репортов в trac:
Projects
Year
Add filter->subtask (Develop-r/Manager): свое (чужое) имя.

*****24.03.20

Порядок update commit:
Should we always update before committing in SVN?
"Merging in Centralized Version Control Systems (CVCS) like subversion is always done before commits so you should update, test (if there are changes), then commit."

Для сборки ICD исп-я папка из: C:\projects\orion\Src\build_icd 
cygwin поставил снова из файла cygwin_new_repack.zip который содержит прав-ю версию. В папке C:\cygwin_pack лежит так же нужный bat скрипт и нужно поправить fstab из etc.

*****25.03.20
Компиляция ICD, Styx adn Orion (под Rtem): 
Путь к C:\projects\ICD\trunk\Src\build_icd

cd projects/ICD/trunk/Src/build_icd/


Иду в cyg_win по этому пути и запускаю скрипты 
sh Cmake_01_ninja_create.sh
sh Cmake_02_build.sh


Рабочие скрипты выгл-т так:
Cmake_01_ninja_create.sh:
export ICD_SOURCE_DIR=/cygdrive/c/projects/ICD/trunk/Src
export ICD_INSLALL_PATH=/cygdrive/c/projects/ICD/inst_rtems_debug/
export RTEMS_PATH=/cygdrive/c/cygwin_pack/ppc-rtems-4.9.2
export STYX_PATH=/Styx/Src

Надо из C:\projects\ICD\trunk\Generated\src "зеленые скрипты"
скопировать в C:\projects\ICD\trunk\Src\src
похоже скрипты это перестали выполнять

#-DICD_BUILD_TYPE="BIUS" 
cmake -GNinja -DCMAKE_TOOLCHAIN_FILE=build_rtems_toolchain.cmake -DCMAKE_BUILD_TYPE=Debug -DICD_BUILD_TYPE="BIUS" -DICD_BIGENDIAN=YES -DCMAKE_INSTALL_PREFIX=$ICD_INSLALL_PATH -DCMAKE_VERBOSE_MAKEFILE=on -DRTEMS_PATH=$RTEMS_PATH -DSTYX_PATH=$STYX_PATH -DTARGET_OS=RTEMS $ICD_SOURCE_DIR

Cmake_02_build.sh:
cmake --build . -- -j4 -- install
#cmake --build . -- install

build_rtems_toolchain.cmake менять не надо

Styx adn Orion собираются под make, не cmake(in rtem):
(ICD под cmake как описано выше)

Компил-я Styx (если он измен-я) - можно просто: 
make -j 7 MODE=DEBUG
в cd projects/Styx/Rtems/Make (все под cyg_win)

Под Win (Styx) - скрипты от сюда: C:\projects\Styx\build_win (24.07.2020)

Компил-я Orion (rtem, in cyg_win):
C:\projects\orion\Src\Rtems\Make\ORION
cd projects/orion/Src/Rtems/Make/ORION/
sh make_wo_icd_debug1.sh
если были ошибки - сначала make clean

Выдает ошибку: Нет правила для сборки цели «LinkClock.cpp»
возм-о в cyg_win нет  /mfd
+ way was in script: cygdrive/c/projects/ICD/trunk/Src/
but must: cygdrive/c/projects/ICD/trunk/Src/src

собранный орион будет в каталоге: 
C:\projects\orion\Src\Rtems\Bin\ORION

Тестировщикам в \\newstorage\ktrs\inout\_common\Mikkir 
нужно положить три файла с .fdi и BIUS.img

Комп-я ICD под Win - 4-е скрипта отсюда (скорее всего, пишу из дома 06.04.20):
C:\projects\ICD\trunk\Src\build_win32_deb

Сборка под Windows запуском скриптов из каталагов (01, 02..., с паузами в конце исходников)
Если есть проблемы со сборкой под Rtems возможно все надо пересобрать сначала под Виндовз. Так было при добавлении новых директорий в Орион, который не виделись Визуал Студией до пересборки под Виндовс.
*****26.03.20

В Jenkins при сборке можно (если не исп-я вывод в консоль) убрать все дебаг-опции.
Если не было обновлений Styx и ICD можно вообще все убрать выставив только Rtems.

*****27.03.20
В отчете по Jira писать 5d - за неделю.
Проект VC-3.ORION

TrueConf 4k adress: 82.204.181.253

*****01.04.20
Why it in Ethernet folder ?
RegisterOUTMessages(new ICDOUTMessageGlobal<Messages::VC2_PVS_CONTROL>(
		&Messages::CollectData, MTO_MONITOR_TM, &MTO::IsMonitorDevices));
	RegisterOUTMessages(new ICDOUTMessageGlobal<Messages::VC3_PVS_CONTROL>(
		&Messages::CollectData, MTO_MONITOR_TM, &MTO::IsMonitorDevices));

*****03.04.20
Пример определения соб-й ноды
VC3::UNITNUM Self = static_cast<VC3::UNITNUM>(VC3NUMSetting.Value());
    if (Self == VC3::UNIT2_PRIO)

Много времени потерял с тикетом #20357 пока не узнал что:
От БИУС на БУОСО 260/11 является командой «Включить тест-контроль ПОЗ», от БУОСО на БИУС 260/11 является признаком «ПУЛ запущен от СО».
От БИУС на БУОСО - находятся в 
\ORION\IA429Output\BUOSO.cpp 

Тикет #20746 закрыл Сергей А.

*****07.04.20
сообщение с порта НПУ (7011, 7012) - это в радиоканале. 
\IRadioTask\RadioChannels.cpp
взять с виртуального канала - это например 
Monitor::exch_VC2_CM_V_BUOSO 

static TIMETRACE tt(1000);
tt("Печать раз в секунду %d\n", var );

send to Roman Kol two vers: 
a - comment ssm
b - no comment

*****14.04.20
VC3::POS_VV





